<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PickMyBinge.com - Find Your Next Binge-Worthy Show or Movie | Streaming Recommendations</title>
    <meta name="description" content="Struggling to decide what to watch? PickMyBinge helps you discover the best binge-worthy TV shows, movies, and streaming content. Get personalized recommendations based on your mood and preferences.">
    <meta name="keywords" content="what to watch, binge-worthy shows, streaming recommendations, best TV shows, top movies, Netflix recommendations, Disney+ picks, Amazon Prime shows, Hulu series, what to binge">
    <meta name="robots" content="index, follow">
    <meta name="author" content="PickMyBinge.com">
    <link rel="canonical" href="https://www.pickmybinge.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.pickmybinge.com/">
    <meta property="og:title" content="PickMyBinge.com - Find Your Next Binge-Worthy Show or Movie">
    <meta property="og:description" content="Discover your next favorite binge-worthy TV show or movie. Personalized recommendations for Netflix, Hulu, Amazon Prime, Disney+ and more.">
    <meta property="og:image" content="https://www.pickmybinge.com/images/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.pickmybinge.com/">
    <meta property="twitter:title" content="PickMyBinge.com - Find Your Next Binge-Worthy Show or Movie">
    <meta property="twitter:description" content="Discover your next favorite binge-worthy TV show or movie. Personalized recommendations for all streaming platforms.">
    <meta property="twitter:image" content="https://www.pickmybinge.com/images/twitter-image.jpg">
    
    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "PickMyBinge",
      "url": "https://www.pickmybinge.com/",
      "description": "Tool to help users find TV shows and movies to watch based on their preferences",
      "applicationCategory": "EntertainmentApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #FF5E5B;
            --secondary: #00CECB;
            --dark: #1E1E2E;
            --light: #FDFFFC;
            --accent: #FFC53D;
            --gray: #8B8BA0;
            --success: #4CAF50;
            --warning: #FF9800;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark), #2D3047);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            color: var(--primary);
            transition: transform 0.3s ease;
        }
        
        .logo:hover .logo-icon {
            transform: rotate(15deg) scale(1.1);
        }
        
        header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: -0.5px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 20px;
        }
        
        .tagline {
            font-style: italic;
            color: var(--secondary);
            margin-bottom: 25px;
            font-weight: 500;
        }
        
        .api-status {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 15px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }
        
        .status-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            position: relative;
        }
        
        .status-dot::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .status-online {
            background: var(--success);
        }
        
        .status-online::after {
            background: var(--success);
            opacity: 0.6;
        }
        
        .status-offline {
            background: var(--primary);
        }
        
        .status-loading {
            background: var(--warning);
        }
        
        .status-loading::after {
            background: var(--warning);
            opacity: 0.6;
        }
        
        .search-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin: 30px auto;
            max-width: 800px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .search-container:focus-within {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
        }
        
        .search-box {
            display: flex;
            gap: 15px;
        }
        
        #search-input {
            flex: 1;
            padding: 18px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            background: rgba(30, 30, 46, 0.7);
            color: var(--light);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        #search-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--secondary);
        }
        
        #search-input::placeholder {
            color: var(--gray);
        }
        
        #search-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 94, 91, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        #search-btn:hover {
            background: #FF4240;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 94, 91, 0.4);
        }
        
        #search-btn:active {
            transform: translateY(0);
        }
        
        .filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            background: transparent;
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-btn.active {
            background: rgba(255, 197, 61, 0.2);
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .filter-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .recommendation-section {
            margin: 40px 0;
        }
        
        .section-title {
            font-size: 2rem;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }
        
        .recommendation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .poster {
            width: 100%;
            height: 380px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .card:hover .poster {
            transform: scale(1.05);
        }
        
        .info {
            padding: 20px;
        }
        
        .title {
            font-size: 1.3rem;
            margin-bottom: 8px;
            font-weight: 600;
            line-height: 1.3;
        }
        
        .year {
            color: var(--accent);
            font-weight: 500;
            margin-bottom: 12px;
            font-size: 0.9rem;
        }
        
        .plot {
            margin-bottom: 15px;
            line-height: 1.5;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.8);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .rating {
            background: rgba(0, 206, 203, 0.2);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 500;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .type-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .movie-type {
            background: var(--primary);
        }
        
        .tv-type {
            background: var(--secondary);
        }
        
        .card-header {
            position: relative;
            overflow: hidden;
        }
        
        .card-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(30, 30, 46, 0.9), transparent);
        }
        
        .loading {
            text-align: center;
            font-size: 1.5rem;
            margin: 40px 0;
            display: none;
            color: var(--accent);
        }
        
        .error {
            text-align: center;
            color: var(--primary);
            margin: 20px 0;
            display: none;
            padding: 20px;
            background: rgba(255, 94, 91, 0.1);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .instructions {
            text-align: center;
            margin-top: 30px;
            opacity: 0.8;
            font-size: 1.1rem;
        }
        
        .no-results {
            text-align: center;
            grid-column: 1 / -1;
            padding: 40px;
            font-size: 1.2rem;
            display: none;
            color: var(--gray);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        
        .api-source {
            font-size: 0.8rem;
            margin-top: 10px;
            opacity: 0.7;
            color: var(--gray);
        }
        
        .clear-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.2rem;
            z-index: 2;
            transition: color 0.3s ease;
        }
        
        .clear-btn:hover {
            color: var(--light);
        }
        
        .search-wrapper {
            position: relative;
            flex: 1;
        }
        
        .binge-meter {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .binge-meter-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 2px;
            width: 0%;
            transition: width 1s ease;
        }
        
        .trending-badges {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .trending-badge {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            background: rgba(255, 94, 91, 0.2);
            color: var(--primary);
        }
        
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
        }
        
        /* Animation for cards */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.5);
                opacity: 0;
            }
           100% {
                transform: scale(1);
                opacity: 0.7;
            }
        }
        
        .card {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Recommendation bubbles */
        .recommendation-bubbles {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0 40px;
        }
        
        .bubble {
            padding: 12px 25px;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .bubble:hover {
            background: rgba(255, 197, 61, 0.1);
            color: var(--accent);
            transform: translateY(-2px);
        }
        
        .bubble.active {
            background: rgba(255, 197, 61, 0.2);
            color: var(--accent);
            border-color: var(--accent);
        }
        
        /* Accessibility improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Focus styles for accessibility */
        button:focus-visible,
        input:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
        
        /* Lazy loading for images */
        .poster {
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .poster.loaded {
            opacity: 1;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            background: var(--dark);
            color: var(--light);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast.success {
            border-left: 4px solid var(--success);
        }
        
        .toast.error {
            border-left: 4px solid var(--primary);
        }
        
        /* NEW: Autocomplete dropdown */
        .autocomplete {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(30, 30, 46, 0.95);
            border-radius: 0 0 15px 15px;
            margin-top: -10px;
            z-index: 100;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
        }
        
        .autocomplete-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .autocomplete-item:hover, .autocomplete-item:focus {
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        
        /* NEW: Load more button */
        .load-more {
            display: block;
            margin: 30px auto;
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
        }
        
        .load-more:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        /* NEW: Save for later button */
        .save-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(30, 30, 46, 0.7);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            color: var(--light);
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .save-btn.saved {
            background: var(--primary);
            color: white;
        }
        
        /* NEW: Saved section */
        .saved-section {
            margin: 40px 0;
            display: none;
        }
        
        .saved-section.visible {
            display: block;
        }
        
        /* NEW: View toggle */
        .view-toggle {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
        }
        
        .view-toggle-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--light);
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .view-toggle-btn:first-child {
            border-radius: 5px 0 0 5px;
        }
        
        .view-toggle-btn:last-child {
            border-radius: 0 5px 5px 0;
        }
        
        .view-toggle-btn.active {
            background: rgba(255, 197, 61, 0.2);
            color: var(--accent);
            border-color: var(--accent);
        }
        
        /* NEW: SEO Content Section */
        .seo-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .seo-content h2 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .seo-content h3 {
            color: var(--secondary);
            margin: 25px 0 15px;
            font-size: 1.4rem;
        }
        
        .seo-content p {
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .seo-content ul, .seo-content ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        .seo-content li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .platform-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .platform-tag {
            background: rgba(0, 206, 203, 0.15);
            color: var(--secondary);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        /* NEW: Skeleton loading */
        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }
        
        .skeleton.poster {
            height: 380px;
            width: 100%;
        }
        
        .skeleton.text {
            height: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .skeleton.text.short {
            width: 60%;
        }
        
        .skeleton.text.medium {
            width: 80%;
        }
        
        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
        
        /* NEW: Streaming service badges */
        .streaming-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-right: 5px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .netflix {
            background: #E50914;
            color: white;
        }
        
        .hulu {
            background: #1CE783;
            color: black;
        }
        
        .prime {
            background: #00A8E1;
            color: white;
        }
        
        .disney {
            background: #113CCF;
            color: white;
        }
        
        .hbo {
            background: #000;
            color: white;
        }
        
        /* NEW: Advanced filters panel */
        .advanced-filters {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .advanced-filters.visible {
            display: block;
        }
        
        .filter-group {
            margin-bottom: 15px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 10px 15px;
            border-radius: 8px;
            background: rgba(30, 30, 46, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--light);
        }
        
        .toggle-filters {
            display: block;
            margin: 10px auto;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--light);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-filters:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive improvements */
        @media (max-width: 768px) {
            .search-box {
                flex-direction: column;
            }
            
            #search-input, #search-btn {
                width: 100%;
            }
            
            .recommendation-cards {
                grid-template-columns: 1fr;
            }
            
            .filters {
                flex-wrap: wrap;
            }
            
            header h1 {
                font-size: 2.5rem;
            }
            
            .search-container {
                padding: 20px;
            }
            
            .recommendation-bubbles {
                gap: 10px;
            }
            
            .bubble {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            /* NEW: Mobile adjustments */
            .autocomplete {
                position: relative;
                margin-top: 0;
                border-radius: 0 0 15px 15px;
            }
            
            .seo-content {
                padding: 20px;
            }
            
            .seo-content h2 {
                font-size: 1.5rem;
            }
            
            .seo-content h3 {
                font-size: 1.2rem;
            }
            
            .view-toggle {
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            header h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.7rem;
            }
            
            .status-item {
                font-size: 0.8rem;
                padding: 4px 12px;
            }
            
            .card {
                max-width: 320px;
                margin: 0 auto;
            }
            
            .recommendation-bubbles {
                justify-content: space-between;
            }
            
            .bubble {
                flex: 1;
                min-width: 45%;
                text-align: center;
                padding: 8px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-popcorn logo-icon" aria-hidden="true"></i>
            </div>
            <h1>PickMyBinge.com</h1>
            <p class="tagline">Discover your next favorite show or movie</p>
            <p>Struggling to decide what to watch? We'll help you find the perfect entertainment for your mood.</p>
            
            <div class="api-status">
                <div class="status-item">
                    <span class="status-dot status-loading" id="tvmaze-status"></span>
                    <span>TVmaze API</span>
                </div>
                <div class="status-item">
                    <span class="status-dot status-loading" id="moviesapi-status"></span>
                    <span>Movies API</span>
                </div>
            </div>
        </header>
        
        <div class="search-container">
            <div class="search-box">
                <div class="search-wrapper">
                    <input type="text" id="search-input" placeholder="What are you in the mood for? (e.g. comedy, action, drama)" aria-label="Search for shows and movies">
                    <button class="clear-btn" id="clear-btn" style="display: none;" aria-label="Clear search">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="autocomplete" id="autocomplete"></div>
                </div>
                <button id="search-btn">
                    <i class="fas fa-search"></i> Find My Binge
                </button>
            </div>
            <div class="filters">
                <button class="filter-btn active" data-type="all" aria-pressed="true">
                    <i class="fas fa-globe"></i> All
                </button>
                <button class="filter-btn" data-type="movie" aria-pressed="false">
                    <i class="fas fa-film"></i> Movies
                </button>
                <button class="filter-btn" data-type="tv" aria-pressed="false">
                    <i class="fas fa-tv"></i> TV Shows
                </button>
                <button class="filter-btn" data-type="high-rated" aria-pressed="false">
                    <i class="fas fa-star"></i> Highly Rated
                </button>
            </div>
            
            <button class="toggle-filters" id="toggle-filters">
                <i class="fas fa-sliders-h"></i> Advanced Filters
            </button>
            
            <div class="advanced-filters" id="advanced-filters">
                <div class="filter-group">
                    <label for="year-filter">Release Year</label>
                    <select id="year-filter">
                        <option value="">Any Year</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        <option value="2019">2019</option>
                        <option value="2010-2018">2010-2018</option>
                        <option value="2000-2009">2000-2009</option>
                        <option value="1990-1999">1990-1999</option>
                        <option value="before-1990">Before 1990</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="rating-filter">Minimum Rating</label>
                    <select id="rating-filter">
                        <option value="0">Any Rating</option>
                        <option value="7">7+</option>
                        <option value="8">8+</option>
                        <option value="9">9+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="streaming-filter">Streaming Service</label>
                    <select id="streaming-filter">
                        <option value="">Any Service</option>
                        <option value="netflix">Netflix</option>
                        <option value="hulu">Hulu</option>
                        <option value="prime">Amazon Prime</option>
                        <option value="disney">Disney+</option>
                        <option value="hbo">HBO Max</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="recommendation-bubbles">
            <div class="bubble" data-search="popular" tabindex="0" role="button">ðŸ”¥ Popular Now</div>
            <div class="bubble" data-search="comedy" tabindex="0" role="button">ðŸ˜‚ Comedy</div>
            <div class="bubble" data-search="action" tabindex="0" role="button">ðŸ’¥ Action</div>
            <div class="bubble" data-search="drama" tabindex="0" role="button">ðŸŽ­ Drama</div>
            <div class="bubble" data-search="sci-fi" tabindex="0" role="button">ðŸš€ Sci-Fi</div>
            <div class="bubble" data-search="thriller" tabindex="0" role="button">ðŸ”ª Thriller</div>
        </div>
        
        <div class="view-toggle">
            <button class="view-toggle-btn active" id="view-results">Search Results</button>
            <button class="view-toggle-btn" id="view-saved">Saved For Later</button>
        </div>
        
        <div class="recommendation-section" id="results-section">
            <h2 class="section-title" id="results-title">Recommended For You</h2>
            <div class="recommendation-cards" id="results" role="list" aria-label="Search results">
                <!-- Skeleton loading cards -->
                <div class="card">
                    <div class="card-header">
                        <div class="skeleton poster"></div>
                    </div>
                    <div class="info">
                        <div class="skeleton text short"></div>
                        <div class="skeleton text medium" style="width: 40%"></div>
                        <div class="skeleton text" style="margin-bottom: 10px"></div>
                        <div class="skeleton text" style="height: 0.6rem; width: 70%"></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="skeleton poster"></div>
                    </div>
                    <div class="info">
                        <div class="skeleton text short"></div>
                        <div class="skeleton text medium" style="width: 40%"></div>
                        <div class="skeleton text" style="margin-bottom: 10px"></div>
                        <div class="skeleton text" style="height: 0.6rem; width: 70%"></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="skeleton poster"></div>
                    </div>
                    <div class="info">
                        <div class="skeleton text short"></div>
                        <div class="skeleton text medium" style="width: 40%"></div>
                        <div class="skeleton text" style="margin-bottom: 10px"></div>
                        <div class="skeleton text" style="height: 0.6rem; width: 70%"></div>
                    </div>
                </div>
            </div>
            <button class="load-more" id="load-more">Load More</button>
        </div>
        
        <div class="saved-section" id="saved-section">
            <h2 class="section-title">Your Saved Titles</h2>
            <div class="recommendation-cards" id="saved-results" role="list" aria-label="Saved shows and movies">
                <!-- Saved cards will be inserted here -->
            </div>
        </div>
        
        <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin" aria-hidden="true"></i> Finding your perfect binge...
        </div>
        
        <div class="error" id="error">
            <i class="fas fa-exclamation-circle" aria-hidden="true"></i> Oops! Something went wrong. Please try again.
        </div>
        
        <div class="no-results" id="no-results">
            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;" aria-hidden="true"></i>
            <h3>No results found</h3>
            <p>Try a different search term or browse our recommendations</p>
        </div>
        
        <!-- NEW: SEO Content Section -->
        <section class="seo-content" aria-label="Information about streaming recommendations">
            <h2>Find Your Next Binge-Worthy Show or Movie</h2>
            <p>Welcome to PickMyBinge.com, your ultimate destination for discovering what to watch next. In today's world of endless streaming options from Netflix, Hulu, Amazon Prime Video, Disney+, HBO Max, and more, it can be overwhelming to choose your next binge.</p>
            
            <h3>How to Find the Perfect Show or Movie</h3>
            <p>Our powerful recommendation engine helps you cut through the noise and find content perfectly matched to your mood and preferences. Whether you're looking for a quick comedy to lift your spirits, an intense drama to get lost in, or an action-packed thriller to keep you on the edge of your seat, we've got you covered.</p>
            
            <h3>Streaming Platform Recommendations</h3>
            <div class="platform-tags">
                <span class="platform-tag">Netflix</span>
                <span class="platform-tag">Hulu</span>
                <span class="platform-tag">Amazon Prime</span>
                <span class="platform-tag">Disney+</span>
                <span class="platform-tag">HBO Max</span>
                <span class="platform-tag">Apple TV+</span>
                <span class="platform-tag">Paramount+</span>
                <span class="platform-tag">Peacock</span>
            </div>
            
            <h3>Popular Binge Categories</h3>
            <p>Our users most frequently search for these popular categories:</p>
            <ul>
                <li><strong>Binge-worthy TV shows</strong> - Series you can't stop watching once you start</li>
                <li><strong>Award-winning movies</strong> - Critically acclaimed films from recent years</li>
                <li><strong>Hidden gems</strong> - Underrated shows and movies you might have missed</li>
                <li><strong>Classic series</strong> - Timeless shows that remain popular years later</li>
                <li><strong>Limited series</strong> - Perfect for a weekend binge with a complete story</li>
                <li><strong>International content</strong> - Award-winning shows from around the world</li>
            </ul>
            
            <h3>Tips for Finding Your Next Binge</h3>
            <ol>
                <li>Use our mood-based search to find content matching how you feel</li>
                <li>Filter by highly-rated content to ensure quality viewing</li>
                <li>Save interesting titles to watch later with our bookmark feature</li>
                <li>Explore different genres you might not typically consider</li>
                <li>Check back regularly as we're always adding new recommendations</li>
            </ol>
            
            <h3>Why Use a Recommendation Engine?</h3>
            <p>With the overwhelming amount of content available across streaming platforms, recommendation engines like PickMyBinge.com save you time and frustration. Instead of scrolling endlessly through menus, our algorithm suggests personalized options based on your preferences, ratings, and viewing history patterns.</p>
            
            <p>Whether you're looking for what's trending now, classic favorites, or hidden gems, PickMyBinge.com helps you discover your next favorite show or movie quickly and easily. Start exploring today and never waste time deciding what to watch again!</p>
        </section>
        
        <div class="instructions" id="instructions">
            <p>Try searching for "funny shows", "action movies", or "critically acclaimed series"</p>
        </div>
        
        <footer>
            <p>PickMyBinge.com &copy; 2023 - Find Your Next Favorite Binge</p>
            <p class="api-source">This product uses the TMDB API but is not endorsed or certified by TMDB.</p>
            <nav aria-label="Footer navigation">
                <a href="/privacy" style="color: var(--gray); margin: 0 10px;">Privacy Policy</a>
                <a href="/terms" style="color: var(--gray); margin: 0 10px;">Terms of Service</a>
                <a href="/contact" style="color: var(--gray); margin: 0 10px;">Contact Us</a>
            </nav>
        </footer>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            const clearBtn = document.getElementById('clear-btn');
            const resultsContainer = document.getElementById('results');
            const savedContainer = document.getElementById('saved-results');
            const resultsTitle = document.getElementById('results-title');
            const loadingElement = document.getElementById('loading');
            const errorElement = document.getElementById('error');
            const instructions = document.getElementById('instructions');
            const noResultsElement = document.getElementById('no-results');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const tvmazeStatus = document.getElementById('tvmaze-status');
            const moviesapiStatus = document.getElementById('moviesapi-status');
            const bubbles = document.querySelectorAll('.bubble');
            const toast = document.getElementById('toast');
            const autocomplete = document.getElementById('autocomplete');
            const loadMoreBtn = document.getElementById('load-more');
            const viewResultsBtn = document.getElementById('view-results');
            const viewSavedBtn = document.getElementById('view-saved');
            const resultsSection = document.getElementById('results-section');
            const savedSection = document.getElementById('saved-section');
            const toggleFiltersBtn = document.getElementById('toggle-filters');
            const advancedFilters = document.getElementById('advanced-filters');
            const yearFilter = document.getElementById('year-filter');
            const ratingFilter = document.getElementById('rating-filter');
            const streamingFilter = document.getElementById('streaming-filter');
            
            // API URLs
            const TVMAZE_API_URL = 'https://api.tvmaze.com/';
            const TMDB_API_URL = 'https://api.themoviedb.org/3';
            const TMDB_API_KEY = '15d2ea6d0dc1d476efbca3eba2b9bbfb';
            
            const PLACEHOLDER_IMAGE = 'https://via.placeholder.com/300x450/2D3047/8B8BA0?text=No+Image';
            
            // Genre mappings for API calls
            const genreMappings = {
                'popular': {tvmaze: '', tmdb: ''},
                'comedy': {tvmaze: 'comedy', tmdb: '35'},
                'action': {tvmaze: 'action', tmdb: '28'},
                'drama': {tvmaze: 'drama', tmdb: '18'},
                'sci-fi': {tvmaze: 'science-fiction', tmdb: '878'},
                'thriller': {tvmaze: 'thriller', tmdb: '53'}
            };
            
            // Streaming service mappings
            const streamingServices = {
                'netflix': 'Netflix',
                'hulu': 'Hulu',
                'prime': 'Amazon Prime',
                'disney': 'Disney+',
                'hbo': 'HBO Max'
            };
            
            // NEW: Autocomplete suggestions
            const autocompleteSuggestions = [
                "Comedy movies",
                "Action TV shows",
                "Drama series",
                "Sci-fi movies",
                "Thriller films",
                "Popular now",
                "Highly rated",
                "New releases",
                "Award winners",
                "Classic films",
                "Binge-worthy shows",
                "Family friendly",
                "Documentaries",
                "Animated series",
                "Crime dramas",
                "Fantasy series",
                "Romantic comedies",
                "Horror movies",
                "Independent films",
                "British series"
            ];
            
            let currentResults = [];
            let activeFilter = 'all';
            let usedIds = new Set(); // Track used IDs to prevent duplicates
            let savedItems = JSON.parse(localStorage.getItem('savedBingeItems')) || [];
            let currentPage = 1;
            let currentQuery = '';
            let recentSearches = JSON.parse(localStorage.getItem('recentSearches')) || [];
            let recentlyShownItems = JSON.parse(localStorage.getItem('recentlyShownItems')) || [];
            
            // Show toast notification
            function showToast(message, type = 'success') {
                toast.textContent = message;
                toast.className = `toast ${type} show`;
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            // Show/hide clear button based on input
            searchInput.addEventListener('input', function() {
                clearBtn.style.display = this.value ? 'block' : 'none';
                updateAutocomplete(this.value);
            });
            
            // Update autocomplete suggestions
            function updateAutocomplete(query) {
                if (!query) {
                    autocomplete.style.display = 'none';
                    return;
                }
                
                const filteredSuggestions = autocompleteSuggestions.filter(suggestion => 
                    suggestion.toLowerCase().includes(query.toLowerCase())
                );
                
                if (filteredSuggestions.length === 0) {
                    autocomplete.style.display = 'none';
                    return;
                }
                
                autocomplete.innerHTML = '';
                filteredSuggestions.slice(0, 5).forEach(suggestion => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    item.textContent = suggestion;
                    item.tabIndex = 0;
                    
                    item.addEventListener('click', () => {
                        searchInput.value = suggestion;
                        autocomplete.style.display = 'none';
                        searchInput.focus();
                    });
                    
                    item.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            searchInput.value = suggestion;
                            autocomplete.style.display = 'none';
                            searchInput.focus();
                        }
                    });
                    
                    autocomplete.appendChild(item);
                });
                
                autocomplete.style.display = 'block';
            }
            
            // Hide autocomplete when clicking outside
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !autocomplete.contains(e.target)) {
                    autocomplete.style.display = 'none';
                }
            });
            
            // Clear search input
            clearBtn.addEventListener('click', function() {
                searchInput.value = '';
                clearBtn.style.display = 'none';
                searchInput.focus();
                autocomplete.style.display = 'none';
                showToast('Search cleared', 'success');
            });
            
            // Lazy load images
            function lazyLoadImages() {
                const images = document.querySelectorAll('.poster:not(.loaded)');
                
                images.forEach(img => {
                    if (img.getAttribute('data-src')) {
                        img.setAttribute('src', img.getAttribute('data-src'));
                        img.removeAttribute('data-src');
                    }
                    
                    img.onload = function() {
                        this.classList.add('loaded');
                    };
                    
                    // Fallback if image fails to load
                    img.onerror = function() {
                        this.src = PLACEHOLDER_IMAGE;
                        this.classList.add('loaded');
                    };
                });
            }
            
            // Function to search APIs
            async function searchEntertainment(query, page = 1) {
                loadingElement.style.display = 'block';
                errorElement.style.display = 'none';
                noResultsElement.style.display = 'none';
                
                if (page === 1) {
                    resultsContainer.innerHTML = '';
                    usedIds.clear(); // Reset used IDs
                }
                
                // Update bubbles active state
                bubbles.forEach(bubble => {
                    if (bubble.dataset.search === query) {
                        bubble.classList.add('active');
                        bubble.setAttribute('aria-pressed', 'true');
                    } else {
                        bubble.classList.remove('active');
                        bubble.setAttribute('aria-pressed', 'false');
                    }
                });
                
                try {
                    if (page === 1) {
                        currentResults = [];
                    }
                    
                    // Update results title
                    resultsTitle.textContent = `Results for "${query}"`;
                    currentQuery = query;
                    currentPage = page;
                    
                    // Get genre mapping
                    const genre = genreMappings[query] || {};
                    
                    // Search TVmaze API for TV shows
                    try {
                        tvmazeStatus.className = 'status-dot status-loading';
                        let tvmazeUrl = `${TVMAZE_API_URL}shows`;
                        const params = [];
                        
                        if (genre.tvmaze) {
                            params.push(`genres=${genre.tvmaze}`);
                        }
                        
                        if (params.length > 0) {
                            tvmazeUrl += `?${params.join('&')}`;
                        }
                        
                        const tvmazeResponse = await fetch(tvmazeUrl);
                        if (tvmazeResponse.ok) {
                            const tvmazeData = await tvmazeResponse.json();
                            
                            // Process TVmaze results
                            if (tvmazeData && tvmazeData.length > 0) {
                                // Get random shows, filtering out recently shown ones
                                const availableShows = tvmazeData.filter(show => 
                                    !recentlyShownItems.includes(`tv-${show.id}`)
                                );
                                
                                // If we don't have enough shows, reset the recently shown list
                                if (availableShows.length < 6) {
                                    recentlyShownItems = recentlyShownItems.filter(id => !id.startsWith('tv-'));
                                    showToast('Resetting TV show history to show more variety', 'success');
                                }
                                
                                const randomShows = getRandomItems(availableShows.length > 0 ? availableShows : tvmazeData, 6);
                                
                                for (const show of randomShows) {
                                    if (!usedIds.has(`tv-${show.id}`)) {
                                        currentResults.push({
                                            type: 'tvmaze',
                                            data: {
                                                id: `tv-${show.id}`,
                                                title: show.name,
                                                year: show.premiered ? new Date(show.premiered).getFullYear() : 'N/A',
                                                endYear: show.ended ? new Date(show.ended).getFullYear() : null,
                                                poster: show.image ? show.image.medium : PLACEHOLDER_IMAGE,
                                                rating: show.rating ? show.rating.average : 'N/A',
                                                plot: show.summary ? show.summary.replace(/<[^>]*>/g, '') : 'No description available',
                                                type: 'tv',
                                                country: show.network ? show.network.country.code : 'Unknown',
                                                bingeScore: Math.floor(Math.random() * 20) + 75 // Random binge score between 75-95
                                            }
                                        });
                                        usedIds.add(`tv-${show.id}`);
                                        recentlyShownItems.push(`tv-${show.id}`);
                                    }
                                }
                                tvmazeStatus.className = 'status-dot status-online';
                                showToast(`Found ${randomShows.length} TV shows`, 'success');
                            } else {
                                console.log('No results from TVmaze');
                                tvmazeStatus.className = 'status-dot status-offline';
                            }
                        } else {
                            throw new Error('TVmaze API error');
                        }
                    } catch (tvmazeError) {
                        console.error('TVmaze API error:', tvmazeError);
                        tvmazeStatus.className = 'status-dot status-offline';
                        showToast('TVmaze API is temporarily unavailable', 'error');
                    }
                    
                    // Search for movies using TMDB API - get completely random movies
                    try {
                        moviesapiStatus.className = 'status-dot status-loading';
                        
                        // Get a random page to ensure variety
                        const randomPage = Math.floor(Math.random() * 100) + 1;
                        let moviesUrl = `${TMDB_API_URL}/discover/movie?api_key=${TMDB_API_KEY}&page=${randomPage}`;
                        
                        if (genre.tmdb) {
                            moviesUrl += `&with_genres=${genre.tmdb}`;
                        }
                        
                        // Apply advanced filters if set
                        const yearValue = yearFilter.value;
                        if (yearValue) {
                            if (yearValue.includes('-')) {
                                const [start, end] = yearValue.split('-');
                                moviesUrl += `&primary_release_date.gte=${start}-01-01&primary_release_date.lte=${end}-12-31`;
                            } else if (yearValue === 'before-1990') {
                                moviesUrl += '&primary_release_date.lte=1989-12-31';
                            } else {
                                moviesUrl += `&primary_release_year=${yearValue}`;
                            }
                        }
                        
                        const ratingValue = ratingFilter.value;
                        if (ratingValue > 0) {
                            moviesUrl += `&vote_average.gte=${ratingValue}`;
                        }
                        
                        // Sort by popularity to get a mix of ratings
                        moviesUrl += '&sort_by=popularity.desc';
                        
                        const moviesResponse = await fetch(moviesUrl);
                        if (moviesResponse.ok) {
                            const moviesData = await moviesResponse.json();
                            
                            // Process movies results
                            if (moviesData && moviesData.results && moviesData.results.length > 0) {
                                // Filter out recently shown movies
                                const availableMovies = moviesData.results.filter(movie => 
                                    !recentlyShownItems.includes(`movie-${movie.id}`)
                                );
                                
                                // If we don't have enough movies, reset the recently shown list
                                if (availableMovies.length < 6) {
                                    recentlyShownItems = recentlyShownItems.filter(id => !id.startsWith('movie-'));
                                    showToast('Resetting movie history to show more variety', 'success');
                                }
                                
                                const moviesToShow = availableMovies.length > 0 ? availableMovies : moviesData.results;
                                
                                for (const item of getRandomItems(moviesToShow, 6)) {
                                    if (!usedIds.has(`movie-${item.id}`)) {
                                        // Add streaming service badge if filter is set
                                        let streamingBadge = '';
                                        if (streamingFilter.value) {
                                            streamingBadge = `<span class="streaming-badge ${streamingFilter.value}">${streamingServices[streamingFilter.value]}</span>`;
                                        }
                                        
                                        currentResults.push({
                                            type: 'tmdb',
                                            data: {
                                                id: `movie-${item.id}`,
                                                title: item.title,
                                                year: item.release_date ? new Date(item.release_date).getFullYear() : 'N/A',
                                                poster: item.poster_path ? `https://image.tmdb.org/t/p/w500${item.poster_path}` : PLACEHOLDER_IMAGE,
                                                rating: item.vote_average ? item.vote_average : 'N/A',
                                                plot: item.overview ? item.overview : 'No description available',
                                                type: 'movie',
                                                country: item.original_language ? item.original_language.toUpperCase() : 'Unknown',
                                                bingeScore: Math.floor(Math.random() * 20) + 75, // Random binge score between 75-95
                                                streaming: streamingBadge
                                            }
                                        });
                                        usedIds.add(`movie-${item.id}`);
                                        recentlyShownItems.push(`movie-${item.id}`);
                                    }
                                }
                                moviesapiStatus.className = 'status-dot status-online';
                                
                                // Show load more button if there are more pages
                                loadMoreBtn.style.display = 'block';
                                
                                showToast(`Found ${moviesData.results.length} movies`, 'success');
                            } else {
                                console.log('No results from TMDB API');
                                moviesapiStatus.className = 'status-dot status-offline';
                                loadMoreBtn.style.display = 'none';
                            }
                        } else {
                            throw new Error('TMDB API error');
                        }
                    } catch (moviesError) {
                        console.error('TMDB API error:', moviesError);
                        moviesapiStatus.className = 'status-dot status-offline';
                        loadMoreBtn.style.display = 'none';
                        showToast('Movies API is temporarily unavailable', 'error');
                    }
                    
                    // Store recently shown items in localStorage (keep only last 50)
                    if (recentlyShownItems.length > 50) {
                        recentlyShownItems = recentlyShownItems.slice(recentlyShownItems.length - 50);
                    }
                    localStorage.setItem('recentlyShownItems', JSON.stringify(recentlyShownItems));
                    
                    if (currentResults.length > 0) {
                        displayResults(currentResults);
                    } else {
                        noResultsElement.style.display = 'block';
                        resultsTitle.textContent = 'No Results Found';
                        showToast('No results found for your search', 'error');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    errorElement.style.display = 'block';
                    showToast('An error occurred during search', 'error');
                } finally {
                    loadingElement.style.display = 'none';
                    instructions.style.display = 'none';
                    
                    // Lazy load images after a short delay
                    setTimeout(lazyLoadImages, 100);
                }
            }
            
            // Helper function to get random items from array
            function getRandomItems(array, count) {
                const shuffled = [...array].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }
            
            // Function to display results
            function displayResults(results) {
                const filteredResults = results.filter(item => {
                    if (activeFilter === 'all') return true;
                    if (activeFilter === 'movie') return item.data.type === 'movie';
                    if (activeFilter === 'tv') return item.data.type === 'tv';
                    if (activeFilter === 'high-rated') return item.data.rating >= 8.0;
                    return true;
                });
                
                if (filteredResults.length === 0) {
                    noResultsElement.style.display = 'block';
                    resultsTitle.textContent = 'No Matching Results';
                    return;
                }
                
                filteredResults.forEach((item, index) => {
                    // Skip if already displayed (for pagination)
                    if (document.getElementById(`card-${item.data.id}`)) {
                        return;
                    }
                    
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.setAttribute('role', 'listitem');
                    card.id = `card-${item.data.id}`;
                    
                    const data = item.data;
                    const title = data.title || 'Unknown Title';
                    const year = data.endYear ? `${data.year}-${data.endYear}` : data.year;
                    const image = data.poster || PLACEHOLDER_IMAGE;
                    const plot = data.plot || 'No description available';
                    const rating = data.rating !== 'N/A' ? data.rating : 'N/A';
                    const type = data.type || 'tv';
                    const country = data.country || 'Unknown';
                    const bingeScore = data.bingeScore || Math.floor(Math.random() * 20) + 75;
                    const streamingBadge = data.streaming || '';
                    
                    // Check if item is saved
                    const isSaved = savedItems.some(savedItem => savedItem.id === data.id);
                    
                    // Shorten plot if too long
                    const shortenedPlot = plot.length > 120 ? plot.substring(0, 120) + '...' : plot;
                    
                    card.innerHTML = `
                        <div class="card-header">
                            <button class="save-btn ${isSaved ? 'saved' : ''}" data-id="${data.id}" data-type="${type}" aria-label="${isSaved ? 'Remove from saved' : 'Save for later'}">
                                <i class="fas ${isSaved ? 'fa-bookmark' : 'fa-bookmark-o'}"></i>
                            </button>
                            <img data-src="${image}" alt="${title}" class="poster" src="${PLACEHOLDER_IMAGE}">
                            <span class="type-badge ${type === 'movie' ? 'movie-type' : 'tv-type'}">${type === 'movie' ? 'Movie' : 'TV Show'}</span>
                        </div>
                        <div class="info">
                            <h2 class="title">${title} ${streamingBadge}</h2>
                            <p class="year">${year} â€¢ ${country}</p>
                            <p class="plot">${shortenedPlot}</p>
                            <div class="binge-meter">
                                <div class="binge-meter-fill" style="width: ${bingeScore}%"></div>
                            </div>
                            <div class="details">
                                <span>Binge Score: ${bingeScore}%</span>
                                <span class="rating"><i class="fas fa-star"></i> ${rating}</span>
                            </div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(card);
                    
                    // Add event listener to save button
                    const saveBtn = card.querySelector('.save-btn');
                    saveBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleSaveItem(data);
                    });
                });
            }
            
            // NEW: Toggle save item
            function toggleSaveItem(item) {
                const index = savedItems.findIndex(savedItem => savedItem.id === item.id);
                
                if (index === -1) {
                    // Item not saved, add it
                    savedItems.push(item);
                    showToast(`"${item.title}" saved for later`, 'success');
                } else {
                    // Item already saved, remove it
                    savedItems.splice(index, 1);
                    showToast(`"${item.title}" removed from saved`, 'success');
                }
                
                // Update localStorage
                localStorage.setItem('savedBingeItems', JSON.stringify(savedItems));
                
                // Update UI
                updateSaveButtons();
                displaySavedItems();
            }
            
            // NEW: Update save buttons state
            function updateSaveButtons() {
                document.querySelectorAll('.save-btn').forEach(btn => {
                    const id = btn.dataset.id;
                    const isSaved = savedItems.some(item => item.id === id);
                    
                    if (isSaved) {
                        btn.classList.add('saved');
                        btn.innerHTML = '<i class="fas fa-bookmark"></i>';
                        btn.setAttribute('aria-label', 'Remove from saved');
                    } else {
                        btn.classList.remove('saved');
                        btn.innerHTML = '<i class="fas fa-bookmark-o"></i>';
                        btn.setAttribute('aria-label', 'Save for later');
                    }
                });
            }
            
            // NEW: Display saved items
            function displaySavedItems() {
                savedContainer.innerHTML = '';
                
                if (savedItems.length === 0) {
                    savedContainer.innerHTML = `
                        <div class="no-results" style="display: block;">
                            <i class="fas fa-bookmark" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                            <h3>No saved items yet</h3>
                            <p>Save shows and movies to watch them later</p>
                        </div>
                    `;
                    return;
                }
                
                savedItems.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.setAttribute('role', 'listitem');
                    
                    const title = item.title || 'Unknown Title';
                    const year = item.endYear ? `${item.year}-${item.endYear}` : item.year;
                    const image = item.poster || PLACEHOLDER_IMAGE;
                    const plot = item.plot || 'No description available';
                    const rating = item.rating !== 'N/A' ? item.rating : 'N/A';
                    const type = item.type || 'tv';
                    const country = item.country || 'Unknown';
                    const bingeScore = item.bingeScore || Math.floor(Math.random() * 20) + 75;
                    const streamingBadge = item.streaming || '';
                    
                    // Shorten plot if too long
                    const shortenedPlot = plot.length > 120 ? plot.substring(0, 120) + '...' : plot;
                    
                    card.innerHTML = `
                        <div class="card-header">
                            <button class="save-btn saved" data-id="${item.id}" data-type="${type}" aria-label="Remove from saved">
                                <i class="fas fa-bookmark"></i>
                            </button>
                            <img data-src="${image}" alt="${title}" class="poster" src="${PLACEHOLDER_IMAGE}">
                            <span class="type-badge ${type === 'movie' ? 'movie-type' : 'tv-type'}">${type === 'movie' ? 'Movie' : 'TV Show'}</span>
                        </div>
                        <div class="info">
                            <h2 class="title">${title} ${streamingBadge}</h2>
                            <p class="year">${year} â€¢ ${country}</p>
                            <p class="plot">${shortenedPlot}</p>
                            <div class="binge-meter">
                                <div class="binge-meter-fill" style="width: ${bingeScore}%"></div>
                            </div>
                            <div class="details">
                                <span>Binge Score: ${bingeScore}%</span>
                                <span class="rating"><i class="fas fa-star"></i> ${rating}</span>
                            </div>
                        </div>
                    `;
                    
                    savedContainer.appendChild(card);
                    
                    // Add event listener to save button
                    const saveBtn = card.querySelector('.save-btn');
                    saveBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleSaveItem(item);
                    });
                });
                
                // Lazy load images
                setTimeout(lazyLoadImages, 100);
            }
            
            // Update filter button accessibility attributes
            function updateFilterButtons() {
                filterButtons.forEach(button => {
                    if (button.dataset.type === activeFilter) {
                        button.setAttribute('aria-pressed', 'true');
                    } else {
                        button.setAttribute('aria-pressed', 'false');
                    }
                });
            }
            
            // Event listeners
            searchBtn.addEventListener('click', () => {
                const query = searchInput.value.trim().toLowerCase();
                if (query.length > 0) {
                    searchEntertainment(query);
                } else {
                    showToast('Please enter a search term', 'error');
                    searchInput.focus();
                }
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim().toLowerCase();
                    if (query.length > 0) {
                        searchEntertainment(query);
                    } else {
                        showToast('Please enter a search term', 'error');
                        searchInput.focus();
                        autocomplete.style.display = 'none';
                        e.preventDefault();
                        return false;
                    }
                }
            });
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    activeFilter = button.dataset.type;
                    updateFilterButtons();
                    
                    if (currentResults.length > 0) {
                        displayResults(currentResults);
                        showToast(`Filtered by ${activeFilter}`, 'success');
                    }
                });
                
                // Add keyboard support for filter buttons
                button.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        button.click();
                        e.preventDefault();
                    }
                });
            });
            
            // Add event listeners to recommendation bubbles
            bubbles.forEach(bubble => {
                bubble.addEventListener('click', () => {
                    const searchTerm = bubble.dataset.search;
                    searchInput.value = bubble.textContent;
                    searchEntertainment(searchTerm);
                });
                
                // Add keyboard support for bubbles
                bubble.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        bubble.click();
                        e.preventDefault();
                    }
                });
            });
            
            // NEW: Load more button
            loadMoreBtn.addEventListener('click', () => {
                searchEntertainment(currentQuery, currentPage + 1);
            });
            
            // NEW: View toggle
            viewResultsBtn.addEventListener('click', () => {
                viewResultsBtn.classList.add('active');
                viewSavedBtn.classList.remove('active');
                resultsSection.style.display = 'block';
                savedSection.classList.remove('visible');
            });
            
            viewSavedBtn.addEventListener('click', () => {
                viewSavedBtn.classList.add('active');
                viewResultsBtn.classList.remove('active');
                resultsSection.style.display = 'none';
                savedSection.classList.add('visible');
                displaySavedItems();
            });
            
            // NEW: Toggle advanced filters
            toggleFiltersBtn.addEventListener('click', () => {
                advancedFilters.classList.toggle('visible');
                if (advancedFilters.classList.contains('visible')) {
                    toggleFiltersBtn.innerHTML = '<i class="fas fa-times"></i> Close Filters';
                } else {
                    toggleFiltersBtn.innerHTML = '<i class="fas fa-sliders-h"></i> Advanced Filters';
                }
            });
            
            // NEW: Apply advanced filters
            yearFilter.addEventListener('change', applyAdvancedFilters);
            ratingFilter.addEventListener('change', applyAdvancedFilters);
            streamingFilter.addEventListener('change', applyAdvancedFilters);
            
            function applyAdvancedFilters() {
                if (currentQuery) {
                    searchEntertainment(currentQuery);
                    showToast('Filters applied', 'success');
                }
            }
            
            // Initialize API status
            tvmazeStatus.className = 'status-dot status-loading';
            moviesapiStatus.className = 'status-dot status-loading';
            
            // Pre-load popular content on first load
            searchEntertainment('popular');
            
            // Update filter buttons accessibility on load
            updateFilterButtons();
            
            // Display saved items if any
            displaySavedItems();
        });
    </script>
</body>
</html>
